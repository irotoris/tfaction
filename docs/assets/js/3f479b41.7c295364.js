"use strict";(self.webpackChunktfaction=self.webpackChunktfaction||[]).push([[1649],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),u=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=u(a),f=n,m=d["".concat(p,".").concat(f)]||d[f]||c[f]||l;return a?r.createElement(m,o(o({ref:t},s),{},{components:a})):r.createElement(m,o({ref:t},s))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,o=new Array(l);o[0]=f;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[d]="string"==typeof e?e:n,o[1]=i;for(var u=2;u<l;u++)o[u]=a[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}f.displayName="MDXCreateElement"},1358:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var r=a(7462),n=(a(7294),a(3905));const l={sidebar_position:100},o="Update related pull requests automatically when the base branch is updated",i={unversionedId:"feature/auto-update-related-prs",id:"feature/auto-update-related-prs",title:"Update related pull requests automatically when the base branch is updated",description:"When terraform plan or tfmigrate plan are run in the target A,",source:"@site/docs/feature/auto-update-related-prs.md",sourceDirName:"feature",slug:"/feature/auto-update-related-prs",permalink:"/tfaction/docs/feature/auto-update-related-prs",draft:!1,editUrl:"https://github.com/suzuki-shunsuke/tfaction-docs/edit/main/docs/feature/auto-update-related-prs.md",tags:[],version:"current",sidebarPosition:100,frontMatter:{sidebar_position:100},sidebar:"tutorialSidebar",previous:{title:"Apply safely with Terraform Plan File",permalink:"/tfaction/docs/feature/plan-file"},next:{title:"Create a pull request automatically to handle the problem when apply failed",permalink:"/tfaction/docs/feature/follow-up-pr"}},p={},u=[{value:"Disable this feature",id:"disable-this-feature",level:2}],s={toc:u},d="wrapper";function c(e){let{components:t,...a}=e;return(0,n.kt)(d,(0,r.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"update-related-pull-requests-automatically-when-the-base-branch-is-updated"},"Update related pull requests automatically when the base branch is updated"),(0,n.kt)("p",null,"When ",(0,n.kt)("inlineCode",{parentName:"p"},"terraform plan")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"tfmigrate plan")," are run in the target ",(0,n.kt)("inlineCode",{parentName:"p"},"A"),",\ntfaction sets a pull request label ",(0,n.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,n.kt)("p",null,"When a pull request of the target ",(0,n.kt)("inlineCode",{parentName:"p"},"A")," is merged and ",(0,n.kt)("inlineCode",{parentName:"p"},"terraform apply")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"tfmigrate apply")," are run in the target ",(0,n.kt)("inlineCode",{parentName:"p"},"A"),",\ntfaction updates pull request breanches which have a pull request label ",(0,n.kt)("inlineCode",{parentName:"p"},"A")," by ",(0,n.kt)("a",{parentName:"p",href:"https://docs.github.com/en/rest/reference/pulls#update-a-pull-request-branch"},"GitHub API"),"."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/13323303/151699327-ba31892c-c4a6-47e7-a944-15fca81dfbfb.png",alt:"image"})),(0,n.kt)("p",null,"By updating pull request branch, the result of CI including uploaded Terraform Plan file is updated.\nOtherwise, an uploaded Terraform Plan file becomes stale and it would fail to run ",(0,n.kt)("inlineCode",{parentName:"p"},"terraform apply"),"."),(0,n.kt)("h2",{id:"disable-this-feature"},"Disable this feature"),(0,n.kt)("p",null,"tfaction >= v0.5.23 ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/suzuki-shunsuke/tfaction/issues/892"},"#892")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/suzuki-shunsuke/tfaction/pull/898"},"#898")),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"We don't recommend disabling this feature."),(0,n.kt)("blockquote",{parentName:"admonition"},(0,n.kt)("p",{parentName:"blockquote"},"By updating pull request branch, the result of CI including uploaded Terraform Plan file is updated.\nOtherwise, an uploaded Terraform Plan file becomes stale and it would fail to run ",(0,n.kt)("inlineCode",{parentName:"p"},"terraform apply"),".")),(0,n.kt)("p",{parentName:"admonition"},"If this feature is disabled, users may forget to update Terraform Plan files and terraform apply fails."),(0,n.kt)("p",{parentName:"admonition"},"In some use case the maintainer of workflows and users of workflows are different.\nIn that case, users aren't familiar with tfaction and they don't know that they have to update the plan file.\nAnd they can't understand the cause when terraform apply fails."),(0,n.kt)("p",{parentName:"admonition"},"So we recommend enabling this feature, but you can disable this feature at your own risk.")),(0,n.kt)("p",null,"You can disable this feature."),(0,n.kt)("p",null,"tfaction-root.yaml"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"update_related_pull_requests:\n  enabled: false\n")))}c.isMDXComponent=!0}}]);